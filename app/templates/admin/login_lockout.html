<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account Locked - PISOWifi Admin</title>
<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: linear-gradient(135deg, #dc3545 0%, #fd7e14 100%);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
}

.lockout-container {
    max-width: 500px;
    width: 90%;
    padding: 40px;
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    text-align: center;
}

.lockout-icon {
    font-size: 64px;
    color: #dc3545;
    margin-bottom: 20px;
}

.lockout-title {
    color: #333;
    margin-bottom: 20px;
}

.lockout-message {
    font-size: 16px;
    color: #721c24;
    margin-bottom: 20px;
    line-height: 1.5;
}

.countdown-display {
    font-size: 32px;
    font-weight: bold;
    color: #dc3545;
    margin: 30px 0;
    padding: 20px;
    background: #f8d7da;
    border: 2px solid #f5c6cb;
    border-radius: 8px;
}

.lockout-details {
    background: #fff3cd;
    border: 1px solid #ffeaa7;
    border-radius: 4px;
    padding: 15px;
    margin: 20px 0;
    color: #856404;
    font-size: 14px;
}

.progress-info {
    background: #e3f2fd;
    border: 1px solid #bbdefb;
    border-radius: 4px;
    padding: 15px;
    margin: 20px 0;
    color: #1976d2;
    font-size: 14px;
}

.retry-button {
    background: #6c757d;
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
    margin-top: 20px;
    text-decoration: none;
    display: inline-block;
}

.retry-button:hover {
    background: #5a6268;
    text-decoration: none;
    color: white;
}

.retry-button:disabled {
    background: #e9ecef;
    color: #6c757d;
    cursor: not-allowed;
}

.retry-button.ready {
    background: #28a745;
}

.retry-button.ready:hover {
    background: #218838;
}

.progress-bar {
    width: 100%;
    height: 8px;
    background: #e9ecef;
    border-radius: 4px;
    margin: 20px 0;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #dc3545, #fd7e14, #ffc107, #28a745);
    border-radius: 4px;
    transition: width 1s ease;
}
</style>
</head>
<body>
<div class="lockout-container">
    <div class="lockout-icon">üîí</div>
    
    <h2 class="lockout-title">Login Temporarily Disabled</h2>
    
    <div class="lockout-message">
        {{ lockout_message }}
    </div>
    
    <div class="countdown-display" id="countdown">
        <div id="timer-display">{{ time_remaining }}</div>
    </div>
    
    <div class="progress-bar">
        <div class="progress-fill" id="progress-fill"></div>
    </div>
    
    <div class="lockout-details">
        <strong>Lockout Details:</strong><br>
        ‚Ä¢ Failed attempts: {{ attempt_count }}<br>
        ‚Ä¢ Lockout #{{ lockout_number }}<br>
        ‚Ä¢ Duration: {{ duration_minutes }} minute{{ duration_minutes|pluralize }}<br>
        ‚Ä¢ Next lockout will be {{ duration_minutes|add:1 }} minute{{ duration_minutes|add:1|pluralize }}
    </div>
    
    <div class="progress-info">
        <strong>‚ÑπÔ∏è Progressive Security:</strong><br>
        This system uses progressive timeouts to protect against brute force attacks.<br>
        Lockout durations: 1min ‚Üí 2min ‚Üí 3min ‚Üí 4min ‚Üí 5min ‚Üí 10min ‚Üí 15min ‚Üí 30min ‚Üí 1hr
    </div>
    
    <a href="/admin/login/" class="retry-button" id="retryButton" onclick="return checkTimer()">
        <span id="button-text">Wait {{ time_remaining }}</span>
    </a>
</div>

<script>
let remainingSeconds = {{ remaining_seconds }};
const totalSeconds = remainingSeconds;

function updateCountdown() {
    const timerDisplay = document.getElementById('timer-display');
    const buttonText = document.getElementById('button-text');
    const retryButton = document.getElementById('retryButton');
    const progressFill = document.getElementById('progress-fill');
    
    if (remainingSeconds <= 0) {
        timerDisplay.textContent = 'You can now try again';
        buttonText.textContent = 'Try Login Again';
        retryButton.disabled = false;
        retryButton.classList.add('ready');
        retryButton.onclick = null;
        progressFill.style.width = '100%';
        return;
    }
    
    // Update progress bar
    const progress = ((totalSeconds - remainingSeconds) / totalSeconds) * 100;
    progressFill.style.width = progress + '%';
    
    // Format time display
    let hours = Math.floor(remainingSeconds / 3600);
    let minutes = Math.floor((remainingSeconds % 3600) / 60);
    let seconds = remainingSeconds % 60;
    
    let display = '';
    if (hours > 0) {
        display += hours + 'h ';
    }
    if (minutes > 0) {
        display += minutes + 'm ';
    }
    display += seconds + 's';
    
    timerDisplay.textContent = display;
    buttonText.textContent = 'Wait ' + display;
    
    remainingSeconds--;
    setTimeout(updateCountdown, 1000);
}

function checkTimer() {
    if (remainingSeconds > 0) {
        alert('Please wait for the countdown to finish before trying again.');
        return false;
    }
    return true;
}

// Start the countdown
updateCountdown();

// Add some visual feedback
document.addEventListener('DOMContentLoaded', function() {
    const container = document.querySelector('.lockout-container');
    container.style.opacity = '0';
    container.style.transform = 'translateY(20px)';
    container.style.transition = 'all 0.5s ease';
    
    setTimeout(() => {
        container.style.opacity = '1';
        container.style.transform = 'translateY(0)';
    }, 100);
});
</script>
</body>
</html>